<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Event Dashboard</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
  <%- include("__bootstrap.ejs") %>
</head>

<body>
  <%- include("__header.ejs") %>

  <div class="container mt-4">
    <ul class="nav nav-tabs" role="tablist">
      <li class="nav-item" role="presentation">
        <a class="nav-link active" id="uploaded-tab" data-bs-toggle="tab" href="#uploadedEvents" role="tab" aria-controls="uploadedEvents" aria-selected="true">
          ðŸ“¤ Uploaded Events
        </a>
      </li>
      <li class="nav-item" role="presentation">
        <a class="nav-link" id="registered-tab" data-bs-toggle="tab" href="#registeredEvents" role="tab" aria-controls="registeredEvents" aria-selected="false">
          ðŸ“Œ Registered Events
        </a>
      </li>
      <li class="nav-item" role="presentation">
        <a class="nav-link" id="profile-tab" data-bs-toggle="tab" href="#profile" role="tab" aria-controls="profile" aria-selected="false">
          ðŸ‘¤ Profile
        </a>
      </li>
    </ul>

    <div class="tab-content p-4 border border-top-0 bg-light rounded-bottom shadow-sm">

     
      <div class="tab-pane fade show active" id="uploadedEvents" role="tabpanel" aria-labelledby="uploaded-tab">
        <h4 class="text-success mb-4">ðŸ“¤ Your Uploaded Events</h4>
        <% if (uploadedEvents.length > 0) { %>
          <div class="row row-cols-1 row-cols-md-2 g-4">
            <% uploadedEvents.forEach(event => { %>
              <div class="col">
                <div class="card h-100 border-success shadow-sm">
                  <div class="card-body">
                    <h5 class="card-title"><%= event.event_name %></h5>
                    <p class="card-text">
                      <strong>Date:</strong> <%= new Date(event.date).toLocaleDateString() %><br>
                      <strong>Location:</strong> <%= event.location || 'N/A' %><br>
                      <strong>Total Tickets:</strong> <%= event.total_tickets %><br>
                      <strong>Tickets Left:</strong> <%= event.tickets_left %><br>
                    </p>
                  </div>
                </div>
              </div>
            <% }); %>
          </div>
        <% } else { %>
          <p class="text-muted">You haven't uploaded any events yet.</p>
        <% } %>
      </div>

      <div class="tab-pane fade" id="registeredEvents" role="tabpanel" aria-labelledby="registered-tab">
        <h4 class="text-primary mb-4">ðŸ“Œ Events Youâ€™ve Registered For</h4>
        <% if (registeredEvents.length > 0) { %>
          <div class="row row-cols-1 row-cols-md-2 g-4">
            <% registeredEvents.forEach(event => { %>
              <div class="col">
                <div class="card h-100 border-primary shadow-sm">
                  <div class="card-body">
                    <h5 class="card-title"><%= event.name %></h5>
                    <p class="card-text">
                      <strong>Date:</strong> <%= new Date(event.date).toLocaleDateString() %><br>
                      <strong>Location:</strong> <%= event.location || 'N/A' %><br>
                      <strong>Tickets Booked:</strong> <%= event.tickets %>
                    </p>
                  </div>
                </div>
              </div>
            <% }); %>
          </div>
        <% } else { %>
          <p class="text-muted">You haven't registered for any events yet.</p>
        <% } %>
      </div>

    
      <div class="tab-pane fade" id="profile" role="tabpanel" aria-labelledby="profile-tab">
        <h4 class="text-info mb-4">ðŸ‘¤ Your Profile</h4>
        <div class="card shadow-sm border-info">
          <div class="card-body">
            <p><strong>Username:</strong> <%= profile.username %></p>
            <p><strong>Email:</strong> <%= profile.email %></p>
            <a href="/logout" class="btn btn-danger mt-2">Logout</a>
          </div>
        </div>
      </div>

    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
</body>
</html>
